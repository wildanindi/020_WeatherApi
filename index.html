<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informasi Cuaca</title>
    
</head>
<body>

    <div class="container">
        <h1>Informasi Lokasi & Cuaca</h1>
        
        <form id="form-pencarian">
            <div class="form-group">
                <label for="lokasi-input">Lokasi:</label>
                <input type="text" id="lokasi-input" placeholder="Contoh: Yogyakarta, London, Tokyo" required>
            </div>
            <button type="submit">Cari Data</button>
        </form>

        <div id="hasil-data">
            <p class="pesan">Data akan ditampilkan di sini.</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#form-pencarian').on('submit', function(event) {
                // Mencegah form dari refresh halaman
                event.preventDefault();

                // Ambil nilai dari input
                const lokasi = $('#lokasi-input').val().trim();
                
                // Pastikan input tidak kosong
                if (!lokasi) {
                    $('#hasil-data').html('<p class="pesan error">Kolom lokasi tidak boleh kosong.</p>');
                    return;
                }

               
                const apiKey = '0128da453e474fb2ac240433250610';
                const urlApi = `https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${lokasi}&aqi=no`;

                // Tampilkan pesan loading
                $('#hasil-data').html('<p class="pesan">Mengambil data...</p>');

                // Lakukan panggilan API menggunakan AJAX
                $.ajax({
                    url: urlApi,
                    type: 'GET',
                    dataType: 'json',
                    success: function(data) {
                        // Jika berhasil, bangun string HTML untuk menampilkan data
                        const hasilHtml = `
                            <p><strong>Negara:</strong> ${data.location.country}</p>
                            <p><strong>Provinsi:</strong> ${data.location.region}</p>
                            <p><strong>Kecamatan:</strong> ${data.location.name}</p>
                            <p><strong>Suhu:</strong> ${data.current.temp_c} &deg;C</p>
                            <p><strong>Longitude:</strong> ${data.location.lon}</p>
                            <p><strong>Latitude:</strong> ${data.location.lat}</p>
                        `;
                        // Tampilkan hasil di div #hasil-data
                        $('#hasil-data').html(hasilHtml);
                    },
                    error: function(error) {
                        // Jika gagal, tampilkan pesan error
                        console.error("Error:", error);
                        $('#hasil-data').html('<p class="pesan error">Gagal mengambil data. Pastikan lokasi yang Anda masukkan benar.</p>');
                    }
                });
            });
        });
    </script>
</body>
</html>